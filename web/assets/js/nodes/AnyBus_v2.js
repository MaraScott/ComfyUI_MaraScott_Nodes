var e=Object.defineProperty,t=(t,n,l)=>((t,n,l)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[n]=l)(t,"symbol"!=typeof n?n+"":n,l);async function n(){if(!(globalThis.React&&globalThis.ReactDOM||(await l("https://unpkg.com/react@18.3.1/umd/react.production.min.js"),await l("https://unpkg.com/react-dom@18.3.1/umd/react-dom.production.min.js"),globalThis.React&&globalThis.ReactDOM)))throw new Error("React UMD not loaded")}function l(e){return new Promise((t,n)=>{const l=document.createElement("script");l.src=e,l.async=!0,l.onload=t,l.onerror=()=>n(new Error("Failed to load "+e)),document.head.appendChild(l)})}function a(e,t){if(!e.__ms_mount){const t=document.createElement("div");(e.attachShadow?e.attachShadow({mode:"open"}):e).appendChild(t),e.__ms_mount={container:t,root:globalThis.ReactDOM.createRoot(t)}}e.__ms_mount.root.render(t)}function o(e,t){var n,l,a;const o=null==e?void 0:e.links;return o?function(e){return e&&"function"==typeof e.get&&"function"==typeof e.values}(o)?null!=(n=o.get(t))?n:null:Array.isArray(o)?null!=(l=o.find(e=>e&&e.id===t))?l:null:null!=(a=o[t])?a:null:null}function i(){var e,t,n;return null!=(n=null!=(t=null==(e=globalThis.app)?void 0:e.graph)?t:globalThis.graph)?n:null}function s(){try{window.dispatchEvent(new CustomEvent("marascott:anybus:changed"))}catch{}}window.marascott||(window.marascott={}),window.marascott.AnyBus_v2?(window.marascott.AnyBus_v2.flows={start:[],list:[],end:[]},window.marascott.AnyBus_v2.nodes={}):window.marascott.AnyBus_v2={init:!1,sync:0,input:{label:"0",index:0},clean:!1,nodeToSync:null,flows:{start:[],list:[],end:[]},nodes:{},__syncing:!1};const r="MaraScottAnyBus_v2";function c(e){var t;const n=null==(t=e.inputs)?void 0:t[b.BUS_SLOT];if(!n||null==n.link)return null;const l=o(e.graph,n.link);return l?e.graph.getNodeById(l.origin_id):null}function d(e){var t,n;const l=null==(t=e.outputs)?void 0:t[b.BUS_SLOT],a=[];if(!(null==(n=null==l?void 0:l.links)?void 0:n.length))return a;for(const i of l.links){const t=o(e.graph,i);if(!t)continue;const n=e.graph.getNodeById(t.target_id);(null==n?void 0:n.type)===r&&a.push(n)}return a}function u(e){var t,n,l,a,o,i;const s=null!=(null==(n=null==(t=e.inputs)?void 0:t[b.BUS_SLOT])?void 0:n.link),r=(null!=(i=null==(o=null==(a=null==(l=e.outputs)?void 0:l[b.BUS_SLOT])?void 0:a.links)?void 0:o.length)?i:0)>0;return!(!s&&!r)}function p(e){if(!u(e))return null;const t=function(e){const t=new Set,n=[e],l=[];for(;n.length;){const e=n.shift();if(!e||t.has(e.id))continue;t.add(e.id),l.push(e);const a=c(e);(null==a?void 0:a.type)===r&&n.push(a);for(const t of d(e))n.push(t)}return l}(e);return t.length>1?t:null}function m(e){var t,n,l;const a=(null!=(t=null==e?void 0:e._nodes)?t:[]).filter(e=>(null==e?void 0:e.type)===r),o=new Map;for(const i of a){const e=null!=(l=null==(n=null==i?void 0:i.properties)?void 0:n[E.PROFILE.name])?l:E.PROFILE.default;o.has(e)||o.set(e,[]),o.get(e).push(i)}return o}function h(e,t){if(!e.length)return[];const n=new Set(e.map(e=>e.id)),l=e.filter(e=>!function(e,t){const n=c(e);return n&&t.has(n.id)?n:null}(e,n)),a=[];function o(e,t){const l=function(e,t){return d(e).filter(e=>t.has(e.id))}(e,n);if(l.length)for(const n of l)t.includes(n)?a.push([...t,e]):o(n,[...t,e]);else a.push([...t,e])}return l.length?l.forEach(e=>o(e,[])):o(e[0],[]),a}function g(e){var t,n;const l=[],a=b.FIRST_INDEX,o=null!=(n=null==(t=e.inputs)?void 0:t.length)?n:0;for(let i=a;i<o;i++){const t=e.inputs[i];t&&l.push({slot:i,name:t.name,type:t.type,linked:null!=t.link})}return l}function f(e,t,n){var l,a,i;const s=null==(a=null==(l=null==n?void 0:n.inputs)?void 0:l[b.BUS_SLOT])?void 0:a.link,r=null!=s?o(e,s):null;return r&&r.origin_id===t.id&&r.origin_slot===b.BUS_SLOT?{id:r.id,valid:!0}:{id:null!=(i=null==r?void 0:r.id)?i:null,valid:!1}}function y(e){var t,n,l,a,o,i;if(!(null==e?void 0:e.graph)||window.marascott.AnyBus_v2.__syncing)return;const s=p(e);if(s){window.marascott.AnyBus_v2.__syncing=!0;try{const r=null!=(n=null==(t=e.properties)?void 0:t[E.PROFILE.name])?n:E.PROFILE.default,c=null!=(a=null==(l=e.properties)?void 0:l[E.INPUTS.name])?a:E.INPUTS.default;for(const e of s)E.setValue(e,E.PROFILE.name,r,!0),(null==(o=e.properties)?void 0:o[E.INPUTS.name])!==c&&E.setValue(e,E.INPUTS.name,c,!0);for(const e of s)null==(i=e.setDirtyCanvas)||i.call(e,!0,!0)}finally{window.marascott.AnyBus_v2.__syncing=!1}}}function T(e){return"string"==typeof e&&/^\*\s*\d+/.test(e.trim())}function v(e){var t,n,l,a;if(!(null==e?void 0:e.graph))return;const o=p(e);if(!o)return;const i=function(e){const t=new Map(e.map(e=>[e.id,e])),n=e.filter(e=>!c(e)),l=[];function a(e,n){const o=d(e);if(o.length&&!o.every(e=>!t.has(e.id)))for(const l of o)t.has(l.id)&&(n.includes(l.id)||a(l,[...n,e.id]));else l.push([...n,e.id])}if(n.length)for(const o of n)a(o,[]);else for(const o of e)a(o,[]);return l.map(e=>e.map(e=>t.get(e)))}(o);if(!i.length)return;const s=Math.max(...o.map(e=>{var t,n;return null!=(n=null==(t=e.properties)?void 0:t[E.INPUTS.name])?n:E.INPUTS.default}));for(let r=b.FIRST_INDEX;r<=s;r++){let e=null;for(const n of i){let l=null,a=null;for(let o=0;o<n.length;o++){const i=null==(t=n[o].inputs)?void 0:t[r];if(i&&(!l&&i.type&&"*"!==i.type?(l=i.type,i.name&&!T(i.name)&&(a=i.name)):l?i.type===l&&i.name&&!T(i.name)&&i.name!==a&&(a=i.name):i.name&&!T(i.name)&&(a=null!=a?a:i.name),l&&a)){const t={type:l,label:a,depth:o};(!e||t.depth>e.depth)&&(e=t)}}}if(e)for(const t of o){const a=null==(n=t.inputs)?void 0:n[r],o=null==(l=t.outputs)?void 0:l[r];a&&o&&(a.name=e.label,"*"!==a.type&&a.type!==e.type||(a.type=e.type),o.name=a.name,o.links&&o.links.length>0&&o.type!==e.type&&"*"!==o.type||(o.type=e.type))}}for(const r of o)null==(a=r.setDirtyCanvas)||a.call(r,!0,!0)}const E={NAMESPACE:"MaraScott",TYPE:"AnyBus_v2",BUS_SLOT:0,FIRST_INDEX:1,ALLOWED_REROUTE_TYPE:["Reroute (rgthree)"].slice(),ALLOWED_GETSET_TYPE:["SetNode","GetNode"].slice(),ALLOWED_NODE_TYPE:[],PROFILE:{name:"profile",default:"default"},INPUTS:{name:"inputs",min:2,max:24,default:2},CLEAN:{name:"Clean Inputs",default:!1},init(e){var t,n;e.properties=e.properties||{},e.properties[this.PROFILE.name]=null!=(t=e.properties[this.PROFILE.name])?t:this.PROFILE.default,e.properties[this.INPUTS.name]=null!=(n=e.properties[this.INPUTS.name])?n:this.INPUTS.default,e.properties.prevProfileName=e.properties[this.PROFILE.name],e.shape=LiteGraph.CARD_SHAPE,e.color=LGraphCanvas.node_colors.green.color,e.bgcolor=LGraphCanvas.node_colors.green.bgcolor,e.groupcolor=LGraphCanvas.node_colors.green.groupcolor,e.size[0]=150,this.updateNodeTitle(e)},updateNodeTitle(e){e.title="AnyBus - "+e.properties[this.PROFILE.name]},getByName(e,t){var n;return null==(n=e.widgets)?void 0:n.find(e=>e.name===t)},setWidgetValue(e,t,n){var l;const a=this.getByName(e,t);a&&(a.value=n,null==(l=e.setDirtyCanvas)||l.call(e,!0,!0))},updateNodeIO(e){if(!e.graph)return;const t=e.properties[this.INPUTS.name],n=(e.inputs||[]).map((t,n)=>{if(null!=(null==t?void 0:t.link)){const l=o(e.graph,t.link);if(l)return{idx:n,link:l}}return null}).filter(Boolean);e.inputs=[],e.outputs=[],e.addInput("bus","BUS"),e.addOutput("bus","BUS");for(let l=1;l<=t;l++){const t=`* ${l.toString().padStart(2,"0")}`.toLowerCase();e.addInput(t,"*"),e.addOutput(t,"*")}n.forEach(({idx:t,link:n})=>{const l=e.graph.getNodeById(n.origin_id);l&&e.connect(t,l,n.origin_slot)}),e.setDirtyCanvas(!0)},setWidgets(e){const t=(t,n)=>{var l;const a=null==(l=e.widgets)?void 0:l.find(e=>e.name===t);a&&(a.value=n)};if(this.getByName(e,this.PROFILE.name)?t(this.PROFILE.name,e.properties[this.PROFILE.name]):e.addWidget("text",this.PROFILE.name,e.properties[this.PROFILE.name],t=>this.setValue(e,this.PROFILE.name,t),{title:"Profile name for this bus"}),this.getByName(e,this.INPUTS.name))t(this.INPUTS.name,e.properties[this.INPUTS.name]);else{const t=Array.from({length:this.INPUTS.max-this.INPUTS.min+1},(e,t)=>t+this.INPUTS.min);e.addWidget("combo",this.INPUTS.name,e.properties[this.INPUTS.name],t=>this.setValue(e,this.INPUTS.name,t),{values:t,title:"Number of input/output pairs"})}this.getByName(e,this.CLEAN.name)||e.addWidget("toggle",this.CLEAN.name,this.CLEAN.default,()=>{try{b.clean(e)}catch(t){}},{title:"Clean and reset all connections"})},setValue(e,t,n,l=!1){var a;const o=e.properties[t];e.properties[t]=n,this.setWidgetValue(e,t,n),t===this.PROFILE.name?(this.updateNodeTitle(e),e.properties.prevProfileName=n):t===this.INPUTS.name&&o!==n&&this.updateNodeIO(e),null==(a=e.setDirtyCanvas)||a.call(e,!0,!0),l||u(e)&&(y(e),v(e)),s()}};E.ALLOWED_NODE_TYPE=[E.NAMESPACE+E.TYPE,...E.ALLOWED_REROUTE_TYPE,...E.ALLOWED_GETSET_TYPE];class b{static connectBus(e,t,n,l){var a,o,i,r,c,d,u;const p=E.PROFILE.name,m=null!=(o=null==(a=e.properties)?void 0:a[p])?o:E.PROFILE.default,h=null!=(r=null==(i=n.properties)?void 0:i[p])?r:E.PROFILE.default;if(m!==E.PROFILE.default&&m!==h)return e.disconnectInput(t),null==(c=e.setDirtyCanvas)||c.call(e,!0,!0),void s();m===E.PROFILE.default&&h!==m&&E.setValue(e,p,h);const g=E.INPUTS.name,f=null!=(u=null==(d=n.properties)?void 0:d[g])?u:E.INPUTS.default;E.setValue(e,g,f),v(e),s()}static connectInput(e,t,n,l){var a,o,i,r;const c=null==(a=n.outputs)?void 0:a[l];if(!c)return;const d=(c.name||"").toLowerCase(),p=c.type||"*";(null==(o=e.inputs)?void 0:o[t])&&(e.inputs[t].name=d||`* ${t.toString().padStart(2,"0")}`,e.inputs[t].type=p,(null==(i=e.outputs)?void 0:i[t])&&(e.outputs[t].name=e.inputs[t].name,e.outputs[t].type=p)),null==(r=e.setDirtyCanvas)||r.call(e,!0,!0),u(e)&&v(e),s()}static disConnectBus(e){var t;null==(t=e.setDirtyCanvas)||t.call(e,!0,!0),s()}static disConnectInput(e,t){var n;null==(n=e.setDirtyCanvas)||n.call(e,!0,!0),s()}static clean(e){var t,n,l,a,i;if(!(null==e?void 0:e.graph))return;let r=!1;if(null!=(null==(n=null==(t=e.inputs)?void 0:t[this.BUS_SLOT])?void 0:n.link)){const t=o(e.graph,e.inputs[this.BUS_SLOT].link);if(t){const n=e.graph.getNodeById(t.origin_id);n&&(e.disconnectInput(this.BUS_SLOT),n.connect(this.BUS_SLOT,e,this.BUS_SLOT),r=!0)}}else for(let s=this.FIRST_INDEX;s<(null!=(a=null==(l=e.inputs)?void 0:l.length)?a:0);s++){const t=e.inputs[s];if(t&&null!=t.link){const n=o(e.graph,t.link);if(n){const t=e.graph.getNodeById(n.origin_id);t&&(e.disconnectInput(s),t.connect(n.origin_slot,e,s),r=!0)}}}if(r){const t=" ... cleaned";e.title=e.title+t,null==(i=e.setDirtyCanvas)||i.call(e,!0,!0),setTimeout(()=>{var n;e.title=e.title.replace(t,""),null==(n=e.setDirtyCanvas)||n.call(e,!0,!0)},500),s()}}}t(b,"TYPE",r),t(b,"BUS_SLOT",0),t(b,"FIRST_INDEX",1);const R="Comfy.MaraScott.AnyBus_v2",S=R.replace(/\./g,"-");function w({text:e,kind:t="default"}){const n="warn"===t?"#f59e0b22":"ok"===t?"#16a34a22":"#6b728022",l="warn"===t?"#f59e0b":"ok"===t?"#16a34a":"#6b7280";return globalThis.React.createElement(globalThis.React.Fragment,null,globalThis.React.createElement("span",{style:{display:"inline-block",padding:"2px 8px",marginRight:6,marginBottom:6,fontSize:12,borderRadius:999,background:n,border:"1px solid "+l}},e))}const _=()=>({name:R,aboutPageBadges:[{label:"Website - MaraScott",url:"https://www.marascott.ai/",icon:"pi pi-home"},{label:"Donate - MaraScott",url:"https://github.com/sponsors/MaraScott",icon:"pi pi-heart"},{label:"GitHub - MaraScott",url:"https://github.com/MaraScott/ComfyUI_MaraScott_Nodes",icon:"pi pi-github"}],bottomPanelTabs:[{id:S,title:"MaraScott Flows",type:"custom",render:async e=>{await n();const t=globalThis.React;function l(){const[e,n]=t.useState({flows:[],total:0,scanned:0}),l=t.useCallback(()=>{const e=i();if(!e)return void n({flows:[],totalFlows:0,nodesCount:0,nodes:[],last:Date.now()});const t=m(e),l=Array.from(t.values()).flat().map(e=>{var t,n;return{id:e.id,title:e.title||`Node #${e.id}`,profile:null!=(n=null==(t=e.properties)?void 0:t[E.PROFILE.name])?n:E.PROFILE.default,connected:u(e)}}),a=[];let o=0;for(const[n,i]of t.entries()){const t=h(i).map((t,n)=>{const l=[];for(let o=0;o<t.length-1;o++){const n=f(e,t[o],t[o+1]);l.push({from:t[o],to:t[o+1],linkId:n.id,valid:n.valid})}const a={};for(const e of t)a[e.id]=g(e);return{nodes:t,edges:l,slotSummaries:a,index:n+1}}).filter(e=>e.nodes.length>=2);t.length>0&&(a.push({profile:n,count:t.length,chains:t}),o+=t.length)}n({flows:a,totalFlows:o,nodesCount:l.length,nodes:l,last:Date.now()})},[]);return t.useEffect(()=>{l()},[l]),globalThis.React.createElement(globalThis.React.Fragment,null,globalThis.React.createElement("div",{style:{fontFamily:"sans-serif",fontSize:13,padding:8}},globalThis.React.createElement("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:8}},globalThis.React.createElement("strong",null,"AnyBus Overview"),globalThis.React.createElement(w,{text:`${e.nodesCount} node(s)`}),globalThis.React.createElement(w,{text:`${e.totalFlows} flow(s)`,kind:e.totalFlows?"ok":"warn"}),globalThis.React.createElement("div",{style:{flex:1}}),globalThis.React.createElement("button",{onClick:l,style:{padding:"2px 8px",cursor:"pointer"}},"Refresh")),globalThis.React.createElement("div",{style:{borderTop:"1px solid #e5e7eb",paddingTop:6,marginTop:6}},globalThis.React.createElement("div",{style:{marginBottom:6}},globalThis.React.createElement("strong",null,"Nodes")," ",globalThis.React.createElement(w,{text:`${e.nodesCount}`})),0===e.nodesCount?globalThis.React.createElement("div",{style:{opacity:.7}},"No AnyBus nodes detected."):globalThis.React.createElement("div",null,e.nodes.map(e=>globalThis.React.createElement("div",{key:e.id,style:{display:"flex",alignItems:"center",gap:6,marginBottom:4,flexWrap:"wrap"}},globalThis.React.createElement(w,{text:e.title}),globalThis.React.createElement(w,{text:`profile: ${e.profile}`}),globalThis.React.createElement(w,{text:e.connected?"connected":"solo",kind:e.connected?"ok":"warn"}))))),globalThis.React.createElement("div",{style:{borderTop:"1px solid #e5e7eb",paddingTop:6,marginTop:6}},globalThis.React.createElement("div",{style:{marginBottom:6}},globalThis.React.createElement("strong",null,"Flows")," ",globalThis.React.createElement(w,{text:`${e.totalFlows}`,kind:e.totalFlows?"ok":"warn"})),0===e.flows.length&&globalThis.React.createElement("div",{style:{opacity:.7}},"No flows yet — connect at least two AnyBus nodes sharing the same profile (or default) via BUS to form a flow."),e.flows.map(e=>globalThis.React.createElement("div",{key:e.profile+"_chain_"+ch.index,style:{padding:"8px 10px",border:"1px solid #e5e7eb",borderRadius:8,marginBottom:8,background:"#f9fafb"}},globalThis.React.createElement("div",{style:{marginBottom:6,overflowX:"auto",whiteSpace:"nowrap"}},ch.nodes.map((e,n)=>globalThis.React.createElement(t.Fragment,{key:e.id+"_frag"},globalThis.React.createElement(w,{text:e.title||`Node #${e.id}`}),n<ch.nodes.length-1&&globalThis.React.createElement("span",{style:{margin:"0 6px"}},"→")))),globalThis.React.createElement("div",{style:{marginBottom:6}},globalThis.React.createElement("div",{style:{fontWeight:600,marginBottom:4}},"Links along the way"),0===ch.edges.length?globalThis.React.createElement("div",{style:{opacity:.7}},"No BUS edges in this chain."):ch.edges.map((e,t)=>{var n;return globalThis.React.createElement("div",{key:t,style:{marginBottom:2}},e.from.title||e.from.id," → ",e.to.title||e.to.id," ",globalThis.React.createElement(w,{text:`bus link: ${null!=(n=e.linkId)?n:"n/a"}`,kind:e.valid?"ok":"warn"}))})),globalThis.React.createElement("details",null,globalThis.React.createElement("summary",{style:{cursor:"pointer",fontWeight:600}},"Slot details (per node)"),ch.nodes.map(e=>{var t;return globalThis.React.createElement("div",{key:"slots_"+e.id,style:{marginTop:6}},globalThis.React.createElement("div",{style:{fontWeight:600}},e.title||`Node #${e.id}`),0===(null!=(t=ch.slotSummaries[e.id])?t:[]).length?globalThis.React.createElement("div",{style:{opacity:.7}},"No input slots."):globalThis.React.createElement("div",null,ch.slotSummaries[e.id].map(t=>globalThis.React.createElement("div",{key:e.id+"_s_"+t.slot,style:{display:"flex",gap:6,alignItems:"center"}},globalThis.React.createElement(w,{text:`#${t.slot}`}),globalThis.React.createElement(w,{text:t.name||"(unnamed)"}),globalThis.React.createElement(w,{text:t.type||"*"}),globalThis.React.createElement(w,{text:t.linked?"linked":"free",kind:t.linked?"ok":"default"})))))})))))))}e.innerHTML="",a(e,globalThis.React.createElement(l,null))}}],async beforeRegisterNodeDef(e,t,n){if(e.comfyClass===E.NAMESPACE+E.TYPE){const t=e.prototype.onNodeCreated;e.prototype.onNodeCreated=function(){E.init(this),E.setWidgets(this),E.updateNodeIO(this),E.setWidgetValue(this,E.PROFILE.name,this.properties[E.PROFILE.name]),E.setWidgetValue(this,E.INPUTS.name,this.properties[E.INPUTS.name]),null==t||t.apply(this,arguments),this.serialize_widgets=!0,window.marascott.AnyBus_v2.init=!0};const n=e.prototype.onConnectionsChange;e.prototype.onConnectionsChange=function(e,t,l,a,o){var i,c;if(this.graph){if(window.marascott.AnyBus_v2.input.index=t+1-b.FIRST_INDEX,l&&a){const e=this.graph.getNodeById(a.origin_id);e&&(t===b.BUS_SLOT?e.type===r&&a.origin_slot===b.BUS_SLOT?b.connectBus(this,t,e,a.origin_slot):this.disconnectInput(t):b.connectInput(this,t,e,a.origin_slot))}else l||(t===b.BUS_SLOT?b.disConnectBus(this):b.disConnectInput(this,t));t===b.BUS_SLOT&&null!=(null==(c=null==(i=this.inputs)?void 0:i[b.BUS_SLOT])?void 0:c.link)&&y(this),s(),null==n||n.apply(this,arguments)}}}},async setup(){}}),I=()=>({id:S,icon:"mdi mdi-vector-polyline",title:"Any Bus",tooltip:"Any Bus Dashboard",type:"custom",render:async e=>{await n();const t=globalThis.React;function l(){const[e,n]=t.useState({flows:[],totalFlows:0,nodesCount:0,nodes:[],last:0}),l=t.useCallback(()=>{const e=i();if(!e)return void n({flows:[],total:0,scanned:0,last:Date.now()});const t=m(e),l=[];let a=0;for(const[n,o]of t.entries()){a+=o.length;const t=h(o).map((t,n)=>{const l=[];for(let o=0;o<t.length-1;o++){const n=f(e,t[o],t[o+1]);l.push({from:t[o],to:t[o+1],linkId:n.id,valid:n.valid})}const a={};for(const e of t)a[e.id]=g(e);return{nodes:t,edges:l,slotSummaries:a,index:n+1}});l.push({profile:n,count:t.length,chains:t})}n({flows:l,total:l.length,scanned:a,last:Date.now()})},[]);return t.useEffect(()=>{const e=()=>l();return window.addEventListener("marascott:anybus:changed",e),()=>window.removeEventListener("marascott:anybus:changed",e)},[l]),globalThis.React.createElement(globalThis.React.Fragment,null,globalThis.React.createElement("div",{style:{fontFamily:"sans-serif",fontSize:12,padding:8}},globalThis.React.createElement("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:8}},globalThis.React.createElement("strong",null,"AnyBus Flows"),globalThis.React.createElement(w,{text:`${e.total} flow(s)`,kind:e.total?"ok":"warn"}),globalThis.React.createElement(w,{text:`${e.scanned} node(s)`}),globalThis.React.createElement("div",{style:{flex:1}}),globalThis.React.createElement("button",{onClick:l,style:{padding:"2px 8px",cursor:"pointer"}},"Refresh")),0===e.flows.length&&globalThis.React.createElement("div",{style:{opacity:.7}},"No AnyBus nodes detected."),e.flows.map(e=>globalThis.React.createElement("details",{key:e.profile,open:!0,style:{borderTop:"1px solid #e5e7eb",paddingTop:6,marginTop:6}},globalThis.React.createElement("summary",{style:{cursor:"pointer"}},globalThis.React.createElement("span",null,"Profile: "),globalThis.React.createElement("strong",null,e.profile)," ",globalThis.React.createElement(w,{text:`${e.count} chain(s)`})),e.chains.map(n=>globalThis.React.createElement("div",{key:e.profile+"_chain_"+n.index,style:{padding:"6px 8px",border:"1px solid #e5e7eb",borderRadius:6,marginBottom:6,background:"#fafafa"}},globalThis.React.createElement("div",{style:{marginBottom:6,overflowX:"auto",whiteSpace:"nowrap"}},n.nodes.map((e,l)=>globalThis.React.createElement(t.Fragment,{key:e.id+"_frag"},globalThis.React.createElement(w,{text:e.title||`Node #${e.id}`}),l<n.nodes.length-1&&globalThis.React.createElement("span",{style:{margin:"0 6px"}},"→")))),globalThis.React.createElement("div",{style:{marginBottom:6}},globalThis.React.createElement("div",{style:{fontWeight:600,marginBottom:2}},"Links"),0===n.edges.length?globalThis.React.createElement("div",{style:{opacity:.7}},"No BUS edges."):n.edges.map((e,t)=>{var n;return globalThis.React.createElement("div",{key:t,style:{display:"flex",alignItems:"center",gap:6}},globalThis.React.createElement("span",null,e.from.title||e.from.id," → ",e.to.title||e.to.id),globalThis.React.createElement(w,{text:`id: ${null!=(n=e.linkId)?n:"n/a"}`,kind:e.valid?"ok":"warn"}))})),globalThis.React.createElement("details",null,globalThis.React.createElement("summary",{style:{cursor:"pointer",fontWeight:600}},"Slots"),n.nodes.map(e=>{var t;return globalThis.React.createElement("div",{key:"slots_"+e.id,style:{marginTop:4}},globalThis.React.createElement("div",{style:{fontWeight:600}},e.title||`Node #${e.id}`),0===(null!=(t=n.slotSummaries[e.id])?t:[]).length?globalThis.React.createElement("div",{style:{opacity:.7}},"No input slots."):globalThis.React.createElement("div",null,n.slotSummaries[e.id].map(t=>globalThis.React.createElement("div",{key:e.id+"_s_"+t.slot,style:{display:"flex",gap:6,alignItems:"center"}},globalThis.React.createElement(w,{text:`#${t.slot}`}),globalThis.React.createElement(w,{text:t.name||"(unnamed)"}),globalThis.React.createElement(w,{text:t.type||"*"}),globalThis.React.createElement(w,{text:t.linked?"linked":"free",kind:t.linked?"ok":"default"})))))}))))))))}e.innerHTML="",a(e,globalThis.React.createElement(l,null))}});export{_ as MaraScottAnyBusNodeExtension,I as MaraScottAnyBusNodeSidebarTab};
